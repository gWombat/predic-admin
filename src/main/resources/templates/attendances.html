<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.thymeleaf.org" layout:decorate="~{layouts/default_layout}">
<head>

<title th:text="#{page.meeting.attendance}">Meetings attendance</title>

</head>
<body>

    <div class="sub-navbar sub-navbar__header-breadcrumbs" layout:fragment="content-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 sub-navbar-column">
                    <div class="sub-navbar-header">
                        <h3 th:text="#{page.meeting.attendance}">Meetings attendance</h3>
                    </div>
                    <ol class="breadcrumb navbar-text navbar-right no-bg">
                        <li class="current-parent">
                            <a class="current-parent" th:href="@{/}">
                                <i class="fa fa-fw fa-home"></i>
                            </a>
                        </li>
                        <li class="active" th:text="#{page.meeting.attendance}">Meetings attendance</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>



    <div layout:fragment="content">
        <div class="row text-center">
            <div class="col-sm-12">
                <button type="button" class="btn btn-outline btn-info" data-toggle="modal"
                    data-target="#modal_add_attendance">
                    <span th:text="#{general.add}">Add</span>
                </button>
            </div>
        </div>
        
        <div class="row">
            <div class="col-sm-2">
                <h5 class="m-t-3">Avril</h5>
                <ul class="list-group">
                    <li class="list-group-item" th:each="attendance : ${monthAttendance.attendances}">
                        <div class="media">
                            <div class="media-body" th:text="${#temporals.format(attendance.date, 'EEE d', #locale)}"></div>
                            <div class="media-body text-right">
                                <span class="label label-outline label-success" th:if="${attendance.maxOfMonth}">
                                    <i class="fa fa-arrow-up"></i>
                                </span> &#160;
                                <span th:text="${attendance.attendance}"></span>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        
        <!-- START Modal Add Attendance -->
        <div id="modal_add_attendance" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <form th:action="@{/attendance}" method="post" th:object="${attendance}">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" th:text="#{page.meeting.attendance.add.entry}">Add attendance</h4>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="attendanceDate" th:text="#{page.meeting.attendance.date}">Date</label>
                                        <input type="text" class="form-control date-picker" id="attendanceDate" 
                                            th:placeholder="#{format.date}" 
                                            th:field="*{date}">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="attendance" th:text="#{page.meeting.attendance.count}">Attendance</label>
                                        <input type="text" class="form-control touchspin" id="attendance" 
                                           th:field="*{attendance}">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal" th:text="#{general.close}">Close</button>
                            <button type="submit" class="btn btn-primary" th:text="#{general.continue}">Save changes</button>
                        </div>
                    </form>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
        <!-- END Modal Add attendance -->
        
        <script th:inline="javascript">
      //<![CDATA[
        $(document).ready(function () {
        	$('.date-picker').datetimepicker({
				locale : 'fr',
				format : /*[[${#strings.toUpperCase(#messages.msg('format.date'))}]]*/'',
				showClear : true,
				icons : {
					time : "fa fa-clock-o",
					date : "fa fa-calendar",
					up : "fa fa-arrow-up",
					down : "fa fa-arrow-down"
				}
			});
        	
        	$('.touchspin').TouchSpin({
        		min: 0,
                max: 1000,
                step: 1
        	});
        });
        //]]>
		</script>
    </div>
</body>
</html>